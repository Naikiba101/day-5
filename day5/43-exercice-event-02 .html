<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>credit card</h1>
    <input type="text" id="creditcard" />

    <!-- 
        développer un script qui permet de controler la saisie du 
        numéro de la carte de crédit selon les régles suivantes:
        - la carte contient 12 chiffres uniquement.
        - chaque groupe de 4 chiffres est séparé par "-" 

        lors de la saisie du numéro de la carte:
        - empêcher la saisie de mauvais caractères.
        - ajouter automatiquement le '-' aprés chaque 4 chiffres
     -->
    <script>
      const creditCardInput = document.getElementById("creditcard");

      creditCardInput.addEventListener("input", function () {
        let trimmedValue = creditCardInput.value.replace(/[^\d]/g, ""); 
        trimmedValue = trimmedValue.substring(0, 16);

        let formattedValue = "";
        for (let i = 0; i < trimmedValue.length; i++) {
          if (i > 0 && i % 4 === 0) {
            formattedValue += "-";
          }
          formattedValue += trimmedValue.charAt(i);
        }

        creditCardInput.value = formattedValue;
      });

      creditCardInput.addEventListener("keydown", function (e) {
        const key = e.key;
        
        if (
          (key !== "Backspace" && key !== "Delete" && isNaN(key)) ||
          creditCardInput.value.length >= 19
        ) {
          e.preventDefault();
        }
      });
    </script>
  </body>
</html>
